@baseUrl = http://localhost:3001/api/v1
@authBaseUrl = {{baseUrl}}/auth
@dashboardBaseUrl = {{baseUrl}}/dashboard
@uploadBaseUrl = {{baseUrl}}/upload

### -------------------------------
### PREREQUISITE: GET AUTH TOKENS
### -------------------------------

### Admin Registration
POST {{authBaseUrl}}/signup
Content-Type: application/json

{
  "email": "testadmin@ukaabtest.com",
  "password": "TestAdmin1234!",
  "user_type": "admin",
  "full_name": "Test Admin User",
  "phone": "+923001234504"
}

### Admin Login (Get Token)
POST {{authBaseUrl}}/login
Content-Type: application/json

{
  "email": "testadmin@ukaabtest.com",
  "password": "TestAdmin1234!"
}

### Save Admin Token
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImF1dGhfdXNlcl9pZCI6IjM0ZDhmNDUxLTFmMWYtNDgzYy1iM2ViLWJlN2NkMzIzNWUwMCIsImlhdCI6MTc1NTk2ODgzMCwiZXhwIjoxNzYzNzQ0ODMwfQ.IOnW717kvALZpnRXjEbYrclBcop7lGsoV2iew4nvrGw

### Driver Registration
POST {{authBaseUrl}}/signup
Content-Type: application/json

{
  "email": "testdriver1@ukaabtest.com",
  "phone": "+923001234506",
  "password": "TestDriver1234!",
  "user_type": "driver",
  "full_name": "Test Driver User"
}

### Driver Login (Get Token)
POST {{authBaseUrl}}/login
Content-Type: application/json

{
  "email": "testdriver1@ukaabtest.com",
  "password": "TestDriver1234!"
}

### Save Driver Token
@driverToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTMsImF1dGhfdXNlcl9pZCI6Ijg3Y2RjZmNkLWEzMjQtNGVjNy1hY2JkLWJjYTQwNjdjMGRmMiIsImlhdCI6MTc1NTk2ODg5NiwiZXhwIjoxNzYzNzQ0ODk2fQ.phWfymMknzn_z6VYZuvC61Yq0Ew5HyjVtcobMPX9sn0

### Shipper Registration
POST {{authBaseUrl}}/signup
Content-Type: application/json

{
  "email": "testshipper@ukaabtest.com",
  "phone": "+923001234507",
  "password": "TestShipper1235!",
  "user_type": "shipper",
  "full_name": "Test Shipper User"
}

### Shipper Login (Get Token)
POST {{authBaseUrl}}/login
Content-Type: application/json

{
  "email": "testshipper@ukaabtest.com",
  "password": "TestShipper1235!"
}

### Save Shipper Token
@shipperToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTQsImF1dGhfdXNlcl9pZCI6IjlkNTNmYzhmLTc0MTctNDU1Yi1iNjlmLTA0ZjVlOTA3YjJhYSIsImlhdCI6MTc1NTk2ODkzMCwiZXhwIjoxNzYzNzQ0OTMwfQ.To-DGwHPI1WV-5z6tXSp_zF0CaoOqiDHvCXeOB45nC4


### -------------------------------
### FILE UPLOAD API TESTS
### -------------------------------

### 1. Driver Uploads License Document (Working Format)
POST {{uploadBaseUrl}}/upload
Authorization: Bearer {{driverToken}}
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="document"; filename="license.pdf"
Content-Type: application/pdf

< ./test-files/sample-license.pdf
--WebAppBoundary
Content-Disposition: form-data; name="document_type"

license
--WebAppBoundary--

### Save Document ID for Admin Review
@uploadedDocId = 4

### 2. Shipper Uploads Business License (Updated to match working format)
POST {{uploadBaseUrl}}/upload
Authorization: Bearer {{shipperToken}}
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="document"; filename="business-license.pdf"
Content-Type: application/pdf

< ./test-files/sample-business-license.pdf
--WebAppBoundary
Content-Disposition: form-data; name="document_type"

license
--WebAppBoundary--

### 3. Admin Views Pending Documents
GET {{uploadBaseUrl}}/pending
Authorization: Bearer {{adminToken}}
Content-Type: application/json

### 4. Admin Approves a Document
PATCH {{uploadBaseUrl}}/review
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "document_id": 1,
  "action": "approve"
}

### 5. Admin Rejects a Document (Example)
PATCH {{uploadBaseUrl}}/review
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "document_id": 2,
  "action": "reject"
}

### 6. Invalid Document Upload (Missing File - Updated format)
POST {{uploadBaseUrl}}/upload
Authorization: Bearer {{driverToken}}
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="document_type"

license
--WebAppBoundary--

### 7. Unauthorized Upload Attempt (Updated format)
POST {{uploadBaseUrl}}/upload
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="document"; filename="license.pdf"
Content-Type: application/pdf

< ./test-files/sample-license.pdf
--WebAppBoundary
Content-Disposition: form-data; name="document_type"

license
--WebAppBoundary--